<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Generalization (dromedary.Constraints.Private.Generalization)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../index.html">dromedary</a> &#x00BB; <a href="../../index.html">Constraints</a> &#x00BB; <a href="../index.html">Private</a> &#x00BB; Generalization</nav><header class="odoc-preamble"><h1>Module <code><span>Private.Generalization</span></code></h1><p>Abstract types to be substituted by functor arguments.</p></header><nav class="odoc-toc"><ul><li><a href="#parameters">Parameters</a></li><li><a href="#signature">Signature</a></li></ul></nav><div class="odoc-content"><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter anchored" id="argument-1-Label"><a href="#argument-1-Label" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Label</span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec parameter anchored" id="argument-2-Type_former"><a href="#argument-2-Type_former" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-2-Type_former/index.html">Type_former</a></span><span> : <a href="../../Module_types/Type_former/module-type-S/index.html">Module_types.Type_former.S</a></span></code></div></div><h2 id="signature"><a href="#signature" class="anchor"></a>Signature</h2><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> state</span></code></div><div class="spec-doc"><p>The generalization module maintains several bits of mutable state related to it's implemented of efficient level-based generalization.</p><p>We encapsulate this in the abstract type <code>state</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_state"><a href="#val-make_state" class="anchor"></a><code><span><span class="keyword">val</span> make_state : <span><span class="xref-unresolved">Constraints__.Import</span>.Unit.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div><div class="spec-doc"><p><code>make_state ()</code> creates a new empty state.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Rigid_type"><a href="#module-Rigid_type" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Rigid_type/index.html">Rigid_type</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Abbrev_type"><a href="#module-Abbrev_type" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Abbrev_type/index.html">Abbrev_type</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Abbreviations"><a href="#module-Abbreviations" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Abbreviations/index.html">Abbreviations</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Equations"><a href="#module-Equations" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Equations/index.html">Equations</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Structure"><a href="#module-Structure" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Structure/index.html">Structure</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Unifier"><a href="#module-Unifier" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Unifier/index.html">Unifier</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_rigid_var"><a href="#val-make_rigid_var" class="anchor"></a><code><span><span class="keyword">val</span> make_rigid_var : 
  <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Constraints__.Import</span>.Int.t <span class="arrow">&#45;&gt;</span></span>
  <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>make_rigid_var ~state rigid_var</code> creates rigid unification variable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_flexible_var"><a href="#val-make_flexible_var" class="anchor"></a><code><span><span class="keyword">val</span> make_flexible_var : <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>make_flexible_var ~state</code> creates a flexible unification variable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_former"><a href="#val-make_former" class="anchor"></a><code><span><span class="keyword">val</span> make_former : <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <a href="argument-2-Type_former/index.html#type-t">Type_former.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>make_former ~state former</code> creates a unification type w/ former <code>former</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_row_uniform"><a href="#val-make_row_uniform" class="anchor"></a><code><span><span class="keyword">val</span> make_row_uniform : <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>make_row_uniform ~state type_</code> creates a unification row w/ row <code>∂(type_)</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_row_cons"><a href="#val-make_row_cons" class="anchor"></a><code><span><span class="keyword">val</span> make_row_cons : 
  <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">label</span>:<span class="xref-unresolved">Label</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">field</span>:<a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">tl</span>:<a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>make_row_cons ~state ~label ~field ~tl</code> creates a unification row w/ row <code>(label : field; tl)</code></p></div></div><p>The type <code>scheme</code> defines the abstract notion of a scheme in &quot;graphic&quot; types.</p><p>A scheme has a notion of &quot;bound&quot; variables, this is encoded in the type <code>variables</code>.</p><p>We note that all bound variables to a *generalized* scheme are *rigid*.</p><div class="odoc-spec"><div class="spec type anchored" id="type-scheme"><a href="#type-scheme" class="anchor"></a><code><span><span class="keyword">type</span> scheme</span></code></div></div><p>The notion of &quot;bound&quot; variables for a scheme is shared between instantiation and computing the set of generic variables, given a scheme.</p><div class="odoc-spec"><div class="spec type anchored" id="type-variables"><a href="#type-variables" class="anchor"></a><code><span><span class="keyword">type</span> variables</span><span> = <span><a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <span class="xref-unresolved">Constraints__.Import</span>.List.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-root"><a href="#val-root" class="anchor"></a><code><span><span class="keyword">val</span> root : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>root scheme</code> returns the root node, or quantifier &quot;body&quot; of the scheme <code>scheme</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-variables"><a href="#val-variables" class="anchor"></a><code><span><span class="keyword">val</span> variables : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-variables">variables</a></span></code></div><div class="spec-doc"><p><code>variables scheme</code> computes the bound variables of a scheme <code>scheme</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mono_scheme"><a href="#val-mono_scheme" class="anchor"></a><code><span><span class="keyword">val</span> mono_scheme : <span><a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-scheme">scheme</a></span></code></div><div class="spec-doc"><p><code>mono_scheme</code> creates a scheme with no generic variables.</p></div></div><p><code>enter ~state</code> creates a new &quot;stack frame&quot; in the constraint solver and enters it.</p><div class="odoc-spec"><div class="spec value anchored" id="val-enter"><a href="#val-enter" class="anchor"></a><code><span><span class="keyword">val</span> enter : <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Constraints__.Import</span>.Unit.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-instantiate"><a href="#val-instantiate" class="anchor"></a><code><span><span class="keyword">val</span> instantiate : <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-variables">variables</a> * <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div><div class="spec-doc"><p><code>instantiate ~state scheme</code> instantates the scheme <code>scheme</code>. It does so, by taking fresh copies of the generic variables, without necessarily copying other bits of the type.</p><p>This is designed for efficient sharing of nodes within the &quot;graphic type&quot;.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Cannot_flexize"><a href="#exception-Cannot_flexize" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Cannot_flexize</span> <span class="keyword">of</span> <span class="xref-unresolved">Constraints__.Import</span>.Int.t</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Rigid_variable_escape"><a href="#exception-Rigid_variable_escape" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Rigid_variable_escape</span> <span class="keyword">of</span> <span class="xref-unresolved">Constraints__.Import</span>.Int.t</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Scope_escape"><a href="#exception-Scope_escape" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Scope_escape</span> <span class="keyword">of</span> <a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exit"><a href="#val-exit" class="anchor"></a><code><span><span class="keyword">val</span> exit : 
  <span><span class="label">state</span>:<a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">rigid_vars</span>:<span><span class="xref-unresolved">Constraints__.Import</span>.Int.t <span class="xref-unresolved">Constraints__.Import</span>.List.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">types</span>:<span><a href="Unifier/Type/index.html#type-t">Unifier.Type.t</a> <span class="xref-unresolved">Constraints__.Import</span>.List.t</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-variables">variables</a> * <span><a href="#type-scheme">scheme</a> <span class="xref-unresolved">Constraints__.Import</span>.List.t</span></span></code></div></div></div></body></html>
